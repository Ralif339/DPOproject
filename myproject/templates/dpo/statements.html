{% extends "manager_navigation.html" %}
{% load static %}

{% block title %}–ó–∞—è–≤–ª–µ–Ω–∏—è{% endblock title %}

{% block style %}
<style>
    body {
        background-color: #FFFFFF;
        color: #000000;
    }
    .sidebar {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
    }
    .card {
        border: 1px solid #ddd;
        border-radius: 10px;
        box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
    }
    .btn-accept {
        background-color: #28a745;
        color: white;
    }
    .btn-accept:hover {
        background-color: #218838;
    }
    .btn-reject {
        background-color: #dc3545;
        color: white;
    }
    .btn-reject:hover {
        background-color: #c82333;
    }
</style>
{% endblock style %}

{% block content %}
<div class="container">
    <div class="container mt-4">
        <h2 class="text-center mb-4">–ó–∞—è–≤–ª–µ–Ω–∏—è —Å–ª—É—à–∞—Ç–µ–ª–µ–π</h2>
    
        <div class="row">
            <!-- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è (—Å–ª–µ–≤–∞) -->
            <div class="col-md-3">
                <div class="sidebar">
                    <h6>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è</h6>
                    
                    <!-- –ü–æ–∏—Å–∫ –ø–æ –§–ò–û -->
                    <label class="mt-2">üîç –ü–æ–∏—Å–∫ –ø–æ –§–ò–û</label>
                    <input type="text" class="form-control mb-2" placeholder="–í–≤–µ–¥–∏—Ç–µ –§–ò–û">
                    
                    <!-- –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –∑–∞—è–≤–ª–µ–Ω–∏—è -->
                    <label class="mt-2">üìù –¢–∏–ø –∑–∞—è–≤–ª–µ–Ω–∏—è</label>
                    <select class="form-select">
                        <option value="">–í—Å–µ</option>
                        <option value="–ó–∞—á–∏—Å–ª–µ–Ω–∏–µ">–ó–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ</option>
                        <option value="–û—Ç—á–∏—Å–ª–µ–Ω–∏–µ">–ó–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç—á–∏—Å–ª–µ–Ω–∏–µ</option>
                    </select>
    
                    <!-- –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ –ø–æ–¥–∞—á–∏ -->
                    <label class="mt-2">üìÖ –î–∞—Ç–∞ –ø–æ–¥–∞—á–∏</label>
                    <input type="date" class="form-control mb-2">
    
                    <!-- –§–∏–ª—å—Ç—Ä –ø–æ –∫—É—Ä—Å—É -->
                    <label class="mt-2">üéì –ö—É—Ä—Å</label>
                    <select class="form-select">
                        <option value="">–í—Å–µ</option>
                        <option value="Frontend">Frontend-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞</option>
                        <option value="Backend">Backend-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞</option>
                        <option value="Data Science">Data Science</option>
                    </select>
                </div>
            </div>
    
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∑–∞—è–≤–ª–µ–Ω–∏–π -->
            <div class="col-md-9">
                <div id="applicationsList">
                    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ 1 -->
                    {% for statement in statements %}
                    <div class="card p-4 mb-3">
                        <h4>–°–ª—É—à–∞—Ç–µ–ª—å: <strong>{{ statement.student.surname }} {{ statement.student.name }} {{ statement.student.patronymic }}</strong></h4>
                        <p><strong>üìù –¢–∏–ø –∑–∞—è–≤–ª–µ–Ω–∏—è:</strong> {{ statement.statement_type }}</p>
                        <p><strong>üìÖ –î–∞—Ç–∞ –ø–æ–¥–∞—á–∏:</strong> {{ statement.submitting_date }}</p>
                        <p><strong>üéì –ö—É—Ä—Å:</strong> {{ statement.course.course_name }}</p>
                        <form action="{% url "statements" %}" method="POST">
                            {% csrf_token %}
                            <label for="groups"><strong>–ì—Ä—É–ø–ø–∞:</strong></label>
                            <select name="selected_group" id="groups">
                                {% with found_suitable_group=False %}
                                    {% for group in groups %}
                                        {% if group.finish_date > today and group.course.id == statement.course.id %}
                                            <option value="{{ group.id }}">{{ group.name }}</option>
                                            {% with found_suitable_group=True %}
                                            {% endwith %}
                                        {% endif %}
                                    {% endfor %}
                                    {% if not found_suitable_group %}
                                        <option value="">–ù–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –≥—Ä—É–ø–ø</option>
                                    {% endif %}
                                {% endwith %}
                            </select>
        
                            <!-- –ö–Ω–æ–ø–∫–∏ -->
                            <div class="d-flex justify-content-between mt-3">
                                <button class="btn btn-accept w-50 me-2" type="submit">–ó–∞—á–∏—Å–ª–∏—Ç—å</button>
                        </form>

                            <button class="btn btn-reject w-50" onclick="rejectApplication()">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

</div>

{% endblock content %}